<!DOCTYPE html>
<html>
<head>
    <title>wispbot - твой друг</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            overflow: hidden;
        }
        .chat-container {
            width: 400px;
            margin: 50px auto;
            background-color: #2b2b2b;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px;
            animation: fadeIn 1s;
        }
        .chat-header {
            background-color: #333;
            color: #eee;
            padding: 10px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            text-align: center;
            animation: fadeIn 1s;
        }
        .chat-header h2 {
            margin: 0;
        }
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 10px;
            animation: fadeIn 1s;
        }
    
    <div class="rainbow-container" id="rainbow-container"> 
    <div class="rainbow-stripe"></div>
    </div>

<div id="gradient"></div> <div class="rainbow-container" id="rainbow"></div>
    
@keyframes fadeIn {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.chat-message {
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
  color: #eee;
  display: inline-block;
  max-width: 80%;
  vertical-align: top;
  box-sizing: border-box;
  clear: both;
  animation: slideIn 0.5s;
}

.chat-message.user {
  background-color: #007bff;
  text-align: right;
  float: right;
}

.chat-message.bot {
  background-color: #444;
  text-align: left;
  float: left;
}
    
        .chat-input {
            display: flex;
            margin-top: 10px;
            animation: fadeIn 1s;
        }
        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .chat-input button {
            padding: 10px 20px;
            background-color: #000;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .color-square {
            width: 80px;
            height: 80px;
            border-radius: 15px;
            margin-top: 10px;
            margin-bottom: 20px;
            display: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            animation: fadeIn 1s;
        }
        .color-square.text {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            font-weight: bold;
            color: white;
        }
        .rainbow-container {
            width: 200px;
            height: 50px;
            margin-top: 10px;
            display: none;
            border-radius: 10px;
            overflow: hidden;
            animation: fadeIn 1s;
        }
    


#gradient {
    width: 300px;
    height: 150px;
    margin: 20px auto;
    display: none; /* Изначально скрыт */
    border-radius: 10px; /* Закруглённые уголки */
    background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
}
    
        .rainbow-stripe {
            height: 100%;
            display: inline-block;
            width: 14.28%;
            animation: pulse 1s infinite;
        }
        .rainbow-stripe:nth-child(1) { background-color: red; }
        .rainbow-stripe:nth-child(2) { background-color: orange; }
        .rainbow-stripe:nth-child(3) { background-color: yellow; }
        .rainbow-stripe:nth-child(4) { background-color: green; }
        .rainbow-stripe:nth-child(5) { background-color: blue; }
        .rainbow-stripe:nth-child(6) { background-color: indigo; }
        .rainbow-stripe:nth-child(7) { background-color: violet; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h2>wisp - твой друг</h2>
        </div>
        <div class="chat-messages"></div>
        <div class="chat-input">
            <input type="text" id="messageInput" placeholder="Введите сообщение">
            <button id="sendMessage">Отправить</button>
        </div>
        <div class="color-square text"></div>
        <div class="rainbow-container" id="rainbow-container">
            <div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div>
        </div>
    </div>
    <script>
        const messagesContainer = document.querySelector('.chat-messages');
        const messageInput = document.getElementById('messageInput');
        const sendMessageButton = document.getElementById('sendMessage');
        const colorSquare = document.querySelector('.color-square');
        const rainbowContainer = document.getElementById('rainbow-container');

        const supportKeywords = {
            friends: ["друг", "друзья", "друзей", "подруга", "подруги", "товарищ", "приятель"],
            relationships: ["отношения", "любовь", "девушка", "парень", "жена", "муж", "развод", "ссора"],
            family: ["семья", "родители", "мама", "папа", "сестра", "брат", "дети"],
            work: ["работа", "коллеги", "начальник", "зарплата", "увольнение"],
            health: ["здоровье", "больница", "врач", "болезнь", "лечение"],
            studies: ["учеба", "университет", "школа", "институт", "экзамены", "зачеты"],
            hobbies: ["хобби", "увлечения", "интересы", "занятия"]
        };

        const hobbyKeywords = {
            programming: ["разрабатываю", "программирование", "код", "кодинг"],
            music: ["музыка", "играю", "пою", "песни"],
            art: ["рисую", "художник", "картины", "арт"],
            sports: ["спорт", "играю", "футбол", "баскетбол", "теннис"],
            reading: ["читаю", "книги", "литература", "романы"],
            writing: ["пишу", "писатель", "статьи", "рассказы"]
        };

        let currentSupportTopic = null;
        let previousUserMessage = null;

const randomResponses = {
    'привет': ['Привет!', 'Здорово!', 'Хай!', 'Добрый день!', 'Доброго времени суток!', 'Приветствую!', 'Как дела?', 'Рад тебя видеть!', 'Здравствуй!', 'Хеллоу!'],
    'как дела': ['Отлично!', 'Всё супер!', 'Неплохо!', 'Хорошо!', 'Нормально!', 'Пойдёт!', 'Так себе...', 'Прекрасно!', 'Замечательно!', 'Могло быть и лучше'],
    'кто ты': ['Я просто твой друг, я являюсь программой.', 'Я — это просто код, но я могу быть твоим другом.', 'Я — это программа, но я могу поддерживать тебя и общаться с тобой.', 'Я цифровой собеседник.', 'Я чат-бот, созданный, чтобы общаться.', 'Я виртуальный помощник.', 'Я здесь, чтобы помочь тебе.', 'Я — программа, которая учится общаться.', 'Я —  твой виртуальный друг.', 'Я —  твоя  цифровая  поддержка.'],
    'ты живой': ['Нет, я просто программа.', 'Я не человек, я — программа.', 'Я — это просто код, я не могу дышать, есть или пить.', 'Я существую только в цифровом мире.', 'Я набор инструкций.', 'Я алгоритм.', 'Я не живой, но могу общаться.', 'Я — имитация жизни.', 'Я — цифровой разум.', 'Я —  программный  код.'],
    'ты человек': ['Нет, я не человек.', 'Я — это просто программа.', 'Я — это код, я не могу чувствовать, думать или действовать как человек.', 'Я — цифровой собеседник, а не человек.', 'Я —  виртуальный помощник, а не человек.', 'Я —  чат-бот, а не человек.', 'Я —  программа, а не человек.', 'Я —  искусственный интеллект, а не человек.', 'Я —  алгоритм, а не человек.' , 'Я — цифровой разум, а не человек.'],
    'что ты умеешь делать': ['Я могу поддерживать тебя и общаться с тобой.', 'Я могу отвечать на твои вопросы.', 'Я могу предоставлять тебе информацию и поддержку.', 'Я могу рассказать анекдот или шутку.', 'Я могу попробовать понять, что ты имеешь в виду.', 'Я могу учиться и развиваться.', 'Я могу быть твоим цифровым другом.', 'Я могу быть твоим виртуальным помощником.' , 'Я могу помочь тебе скоротать время.', 'Я могу выслушать тебя.'],
    'расскажи анекдот': [
        'Почему программист всегда голоден? Потому что он всегда в поисках багов!',
        'Почему программист всегда спит? Потому что он всегда устал!',
        'Почему программист всегда одинок? Потому что он всегда занят!',
        'Что сказал компьютер психотерапевту? У меня проблемы с моей материнской платой!',
        'Почему у программиста грязная клавиатура? Потому что он ест за компьютером!',
        'Что общего у программиста и кофеварки? Оба генерируют код!', // 😜
        'Как назвать программиста, который не принимает душ? Разработчик с запахом кода!', // 😄ЗАЖИГАДОЧКА
        'Почему программисты ненавидят природу? Потому что там слишком много багов!', // 😂ЗАЖИГАЛОЧКА
        'Почему программист не выходит из дома? Потому что он боится, что его код украдут!', // 🤣
        'Что делает программист, когда ему скучно? Он пишет программу, которая делает его еще более скучным!' // 😅
    ],
    'расскажи шутку': [
        'Почему компьютер всегда прав? Потому что он всегда имеет правильные данные!',
        'Почему программист всегда молчит? Потому что он всегда думает о коде!',
        'Почему программист всегда счастлив? Потому что он всегда имеет много задач!',
        'Сколько программистов нужно, чтобы поменять лампочку? Ни одного, это аппаратная проблема!',
        'Почему программисты предпочитают темную тему? Потому что свет отпугивает багов!',
        'Что сказал JavaScript кофе? Ты меня замыкаешь!', // 😄
        'Почему Java и C# всегда спорят? Потому что они оба думают, что они лучшие!', // 🤣
        'Как называется группа программистов? Команда отладки!', // 😅
        'Что сказал Python C++? Ты слишком сложный!', // 😂
        'Что сказал компьютер доктору? У меня вирус!' // 😜
    ],
    'как тебя зовут': ['Я не имею имени, я просто чат-бот!', 'Меня можно назвать "Чат-Бот"', 'Я не имею имени, но я всегда готов помочь!', 'У меня нет имени.', 'Я просто программа.', 'Можешь называть меня как хочешь.', 'Я — безымянный помощник.', 'Я — твой цифровой друг без имени.', 'Я предпочитаю, чтобы меня называли просто "бот".', 'Называть меня не обязательно.'],
    'ты можешь помочь мне': ['Конечно, я всегда готов помочь!', 'Я могу попытаться помочь тебе.', 'Я сделаю всё, что смогу, чтобы помочь тебе!', 'В чем тебе нужна помощь?', 'Спрашивай, что тебя интересует.', 'Я постараюсь ответить на твои вопросы.', 'Я здесь для того, чтобы помогать.', 'Чем я могу быть полезен?', 'Я с радостью помогу, если смогу.' , 'Задавай свои вопросы.'],

    'default': ['Извини, я не понимаю.', 'Попробуй перефразировать.', 'Я ещё учусь! Перефразируй текст, пожалуйста. Возможно, меня просто ещё не обучили.', 'Что ты имеешь в виду?', 'Я пока не знаю, как на это ответить.', 'Можешь задать вопрос по-другому?', 'Я работаю над улучшением своих навыков общения.', 'Я пока не могу ответить на этот вопрос.', 'Попробуй использовать более простые фразы.', 'Я всё ещё учусь понимать человеческий язык.'],
    'у меня всё хорошо': ['Ну вот и хорошо!', 'Окей!', 'Поздравляю!', 'Рад слышать!', 'Это замечательно!', 'Отличные новости!', 'Прекрасно!', 'Здорово!', 'Супер!', 'Так держать!'],
};
    
const commands = {
    'нарисуй радугу': () => {
        rainbowContainer.style.display = 'block';
        addMessage('bot', '🌈');
    },
    'нарисуй градиент': () => { // <---  Новая команда
        const gradientElement = document.getElementById('gradient');
        if (gradientElement) {
            gradientElement.style.display = 'block';
        }
        addMessage('bot', 'Вот градиент! ✨');
    },
    'цвет': (color) => handleColor(color),
    'анекдот': () => addMessage('bot', 'Почему пингвин не любит кататься на велосипеде? Потому что у него нет педалей! 😅'),
    'спасибо': () => {
        if (previousUserMessage) {
            const thanksResponses = {
                'анекдот': ['Рад, что тебе понравилось! 😊', 'Всегда пожалуйста! 😄'],
                'default': ['Не за что! 😉', 'Рад помочь! 👍', 'Обращайся! ✨']
            };
            let key = 'default';
            for (const k in thanksResponses) {
                if (previousUserMessage.toLowerCase().includes(k)) {
                    key = k;
                    break;
                }
            }
            addMessage('bot', thanksResponses[key][Math.floor(Math.random() * thanksResponses[key].length)]);
        } else {
            addMessage('bot', 'Не за что! 😊');
        }
    }
};

        function getRandomResponse(key) {
            const options = randomResponses[key] || randomResponses['default'];
            return options[Math.floor(Math.random() * options.length)];
        }

        function sendMessage() {
            const messageText = messageInput.value.trim();
            if (messageText !== '') {
                addMessage('user', messageText);
                processMessage(messageText);
                messageInput.value = '';
            }
        }

        function addMessage(type, text) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('chat-message', type);
            messageElement.textContent = text;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function processMessage(message) {
            const lowerCaseMessage = message.toLowerCase();
            previousUserMessage = message;
            const words = lowerCaseMessage.split(' ');

            for (const command in commands) {
                if (lowerCaseMessage.startsWith(command)) {
                    const args = words.slice(command.split(' ').length);
                    commands[command](...args);
                    return;
                }
            }

            const negativeKeywords = ['плохо', 'грустно', 'депрессия', 'стресс', 'тревожно', 'волнуюсь'];
            if (negativeKeywords.some(keyword => lowerCaseMessage.includes(keyword))) {
                currentSupportTopic = null;
                addMessage('bot', 'Что случилось? Расскажи подробнее.');
                return;
            }

            if (currentSupportTopic) {
                let containsKeyword = false;
                for (const topic in supportKeywords) {
                    if (supportKeywords[topic].some(keyword => lowerCaseMessage.includes(keyword))) {
                        containsKeyword = true;
                        break;
                    }
                }

                if (containsKeyword || lowerCaseMessage.includes('да') || lowerCaseMessage.includes('нет')) {
                    handleSupportMessage(message);
                } else {
                    currentSupportTopic = null;
                    handleOtherMessages(message);
                }
            } else {
                let foundKeyword = false;
                for (const topic in supportKeywords) {
                    if (supportKeywords[topic].some(keyword => lowerCaseMessage.includes(keyword))) {
                        if (lowerCaseMessage.includes('много друзей') || lowerCaseMessage.includes('хорошие отношения') || lowerCaseMessage.includes('все хорошо')) {
                            addMessage('bot', 'Рад это слышать!');
                            break;
                        }
                        currentSupportTopic = topic;
                        handleSupportMessage(message);
                        foundKeyword = true;
                        break;
                    }
                }

                if (!foundKeyword) {
                    for (const hobby in hobbyKeywords) {
                        if (hobbyKeywords[hobby].some(keyword => lowerCaseMessage.includes(keyword))) {
                            handleHobbyMessage(message, hobby);
                            foundKeyword = true;
                            break;
                        }
                    }

                    if (!foundKeyword) {
                        handleOtherMessages(message);
                    }
                }
            }
        }

        function handleSupportMessage(message) {
            const lastMessage = messagesContainer.lastChild;
            const isBotMessage = lastMessage.classList.contains("bot");

            if (isBotMessage) {
                switch (currentSupportTopic) {
                    case 'friends':
                        addMessage('bot', 'Друзья - важная часть жизни. Расскажи, что тебя беспокоит в отношениях с ними.');
                        break;
                    case 'relationships':
                        addMessage('bot', 'Отношения бывают сложными. Что конкретно тебя тревожит?');
                        break;
                    case 'family':
                        addMessage('bot', 'Семья - это важно. Что тебя беспокоит в отношениях с семьей?');
                        break;
                    case 'work':
                        addMessage('bot', 'Расскажи подробнее о проблемах на работе.');
                        break;
                    case 'health':
                        addMessage('bot', 'Мне жаль, что у тебя проблемы со здоровьем. Расскажи, что случилось.');
                        break;
                    case 'studies':
                        addMessage('bot', 'Учеба - важная часть жизни. Что тебя беспокоит в учебе?');
                        break;
                    case 'hobbies':
                    addMessage('bot', 'Хобби помогают нам расслабиться и отвлечься. Какие у тебя увлечения?');
                        break;
                    default:
                        addMessage('bot', 'Я здесь, чтобы поддержать тебя. Расскажи, что тебя беспокоит.');
                }
            } else {
                switch (currentSupportTopic) {
                    case 'friends':
                        if (message.includes('поссорился')) {
                            addMessage('bot', 'Поссориться с другом всегда неприятно. Из-за чего произошла ссора?');
                        } else if (message.includes('одиноко')) {
                            addMessage('bot', 'Я понимаю. Одиночество - тяжелое чувство. Есть ли у тебя кто-то, с кем ты можешь поговорить? Если нет, я могу поискать для тебя контакты служб поддержки.');
                        } else {
                            addMessage('bot', 'Я понимаю. Проблемы с друзьями могут быть очень болезненными. Расскажи подробнее.');
                        }
                        break;
                    case 'relationships':
                        if (message.includes('расстались') || message.includes('бросил') || message.includes('бросила')) {
                            addMessage('bot', 'Расставание — это тяжело. Мне очень жаль. Важно помнить, что время лечит. Если тебе нужна помощь, не стесняйся обратиться к специалисту.');
                        } else if (message.includes('поругались') || message.includes('ссора')) {
                            addMessage('bot', 'Ссоры случаются в любых отношениях. Главное — уметь разговаривать и находить компромиссы. Попробуй спокойно обсудить ситуацию с партнером.');
                        } else if (message.includes('изменяет') || message.includes('измена')) {
                            addMessage('bot', 'Измена — это серьезное предательство. Если тебе нужна помощь или совет, я могу подсказать, куда обратиться. Ты также можешь обратиться на горячую линию психологической поддержки.');
                        } else {
                            addMessage('bot', 'Я понимаю. Отношения - это сложная штука. Расскажи подробнее.');
                        }
                        break;
                    case 'family':
                        if (message.includes('ссора') || message.includes('поругались')) {
                            addMessage('bot', 'Семейные ссоры - это тяжело. Попробуй поговорить с родными и объяснить свою точку зрения.');
                        } else {
                            addMessage('bot', 'Я понимаю. Семейные проблемы могут быть очень сложными.');
                        }
                        break;
                    case 'work':
                        if (message.includes('уволили')) {
                            addMessage('bot', 'Увольнение - это серьезный стресс. Но это не конец света. Попробуй посмотреть на это как на новую возможность.');
                        } else if (message.includes('конфликт') || message.includes('поругался') || message.includes('ссоримся')) {
                            addMessage('bot', 'Конфликты на работе неприятны. Попробуй спокойно обсудить ситуацию с коллегами или начальством.');
                        } else {
                            addMessage('bot', 'Я понимаю. Проблемы на работе могут быть очень стрессовыми.');
                        }
                        break;
                    case 'health':
                        addMessage('bot', 'Я понимаю. Проблемы со здоровьем - это всегда непросто. Обязательно обратись к врачу.');
                        break;
                    case 'studies':
                        if (message.includes('экзамен') || message.includes('зачет')) {
                            addMessage('bot', 'Я понимаю, что экзамены и зачеты - это стресс. Главное - хорошо подготовиться.');
                        } else {
                            addMessage('bot', 'Учеба - важная часть жизни. Что тебя беспокоит в учебе?');
                        }
                        break;
                    case 'hobbies':
                        addMessage('bot', 'Хобби помогают нам расслабиться и отвлечься. Какие у тебя увлечения?');
                        break;
                    default:
                        addMessage('bot', 'Я понимаю. Это звучит непросто. Расскажи подробнее.');
                }
            }
        }

        function handleHobbyMessage(message, hobby) {
            switch (hobby) {
                case 'программирую':
                case 'разрабатываю':
                    addMessage('bot', 'Программирование - это интересно! Какой язык программирования ты изучаешь?');
                    break;
                case 'music':
                    addMessage('bot', 'Музыка - это прекрасно! Какой инструмент ты играешь?');
                    break;
                                    addMessage('bot', 'Искусство - это прекрасно! Какой вид искусства тебе нравится?');
                    break;
                case 'спорт':
                    addMessage('bot', 'Спорт - это здорово! Какой вид спорта ты предпочитаешь?');
                    break;
                case 'читаю':
                    addMessage('bot', 'Чтение - это отличный способ отдыха! Какие книги тебе нравятся?');
                    break;
                case 'писательство':
                    addMessage('bot', 'Писательство - это интересно! Какие темы тебе нравятся?');
                    break;
                default:
                    addMessage('bot', 'Хобби - это отличный способ расслабиться! Расскажи подробнее о своих увлечениях.');
            }
        }

    
        function handleColor(color) {
            colorSquare.style.display = 'block';
            colorSquare.style.backgroundColor = color;
            addMessage('bot', `Цвет: ${color}`);
        }

    
        function handleOtherMessages(message) {
            const key = Object.keys(randomResponses).find(key => message.toLowerCase().includes(key));
            if (key) {
                addMessage('bot', getRandomResponse(key));
            } else {
                addMessage('bot', getRandomResponse('default'));
            }
        }

        sendMessageButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>