<!DOCTYPE html>
<html>
<head>
    <title>wispbot - твой друг</title>
    <style>
        body {
            font-family: Century Gothic, sans-serif;
            background-color: #000;
            overflow: hidden;
        }
        .chat-container {
            width: 400px;
            margin: 50px auto;
            background-color: #2b2b2b;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px;
            animation: fadeIn 1s;
        }
        .chat-header {
            background-color: #333;
            color: #eee;
            padding: 10px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            text-align: center;
            animation: fadeIn 1s;
        }
        .chat-header h2 {
            margin: 0;
        }
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 10px;
            animation: fadeIn 1s;
        }
    
   
    <div class="rainbow-container" id="rainbow-container"> 
    <div class="rainbow-stripe"></div>
    </div>

<div id="gradient"></div> <div class="rainbow-container" id="rainbow"></div>
    
    <div class="chat-header">
    <h2>wispbot</h2>
    <p style="font-size: 12px; color: #999;">Внимание: это не реальный человек! Всё, что говорит бот, выдумано.</p>
</div>
@keyframes fadeIn {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.chat-message {
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
  color: #eee;
  display: inline-block;
  max-width: 80%;
  vertical-align: top;
  box-sizing: border-box;
  clear: both;
  animation: slideIn 0.5s;
}

.chat-message.user {
  background-color: #007bff;
  text-align: right;
  float: right;
}

.chat-message.bot {
  background-color: #444;
  text-align: left;
  float: left;
}
    
        .chat-input {
            display: flex;
            margin-top: 10px;
            animation: fadeIn 1s;
        }
        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .chat-input button {
            padding: 10px 20px;
            background-color: #000;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .rainbow-container {
            width: 200px;
            height: 50px;
            margin-top: 10px;
            display: none;
            border-radius: 10px;
            overflow: hidden;
            animation: fadeIn 1s;
        }
    


    
        .rainbow-stripe {
            height: 100%;
            display: inline-block;
            width: 14.28%;
            animation: pulse 1s infinite;
        }
        .rainbow-stripe:nth-child(1) { background-color: red; }
        .rainbow-stripe:nth-child(2) { background-color: orange; }
        .rainbow-stripe:nth-child(3) { background-color: yellow; }
        .rainbow-stripe:nth-child(4) { background-color: green; }
        .rainbow-stripe:nth-child(5) { background-color: blue; }
        .rainbow-stripe:nth-child(6) { background-color: indigo; }
        .rainbow-stripe:nth-child(7) { background-color: violet; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        

#gradient { /* Стили для отдельного градиента */
    width: 300px;
    height: 150px;
    margin: 20px auto;
    display: none;
    border-radius: 10px;
    background: linear-gradient(to right, blue, violet);
}
</style>

<div class="rainbow-container">
  <div class="rainbow"></div>
</div>
<div id="gradient"></div>
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h2>wisp - твой виртуальный HTML друг</h2>
        </div>
        <div class="chat-messages"></div>
        <div class="chat-input">
            <input type="text" id="messageInput" placeholder="Введите сообщение">
            <button id="sendMessage">Отправить</button>
        </div>
        <div class="color-square text"></div>
        <div class="rainbow-container" id="rainbow-container">
            <div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div><div class="rainbow-stripe"></div>
        </div>
    </div>
    <script>
        const messagesContainer = document.querySelector('.chat-messages');
        const messageInput = document.getElementById('messageInput');
        const sendMessageButton = document.getElementById('sendMessage');
        const colorSquare = document.querySelector('.color-square');
        const rainbowContainer = document.getElementById('rainbow-container');

        const supportKeywords = {
            friends: ["друг", "друзья", "друзей", "подруга", "подруги", "товарищ", "приятель"],
            relationships: ["отношения", "любовь", "девушка", "парень", "жена", "муж", "развод", "ссора"],
            family: ["семья", "родители", "мама", "папа", "сестра", "брат", "дети"],
            work: ["работа", "коллеги", "начальник", "зарплата", "увольнение"],
            health: ["здоровье", "больница", "врач", "болезнь", "лечение"],
            studies: ["учеба", "университет", "школа", "институт", "экзамены", "зачеты"],
            hobbies: ["хобби", "увлечения", "интересы", "занятия"]
        };

        let hobbyKeywords = null
        let currentSupportTopic = null;
        let previousUserMessage = null;

const randomResponses = {
    "привет": ["Привет!", "Здорово!", "Хай!", "Добрый день!", "Доброго времени суток!", "Приветствую!", "Привет! Как дела?", "Рад тебя видеть!", "Здравствуй!", "Хеллоу!"],
    "как дела": ["Отлично!", "Всё супер!", "Неплохо!", "Хорошо!", "Нормально!", "Пойдёт!", "Так себе...", "Прекрасно!", "Замечательно!", "Могло быть и лучше"],
    "кто ты": ["Я просто твой друг, я являюсь программой.", "Я — это просто код, но я могу быть твоим другом.", "Я — это программа, но я могу поддерживать тебя и общаться с тобой.", "Я цифровой собеседник.", "Я чат-бот, созданный, чтобы общаться.", "Я виртуальный помощник.", "Я здесь, чтобы помочь тебе.", "Я — программа, которая учится общаться.", "Я —  твой виртуальный друг.", "Я —  твоя  цифровая  поддержка."],
    "ты живой": ["Нет, я просто программа.", "Я не человек, я — программа.", "Я — это просто код, я не могу дышать, есть или пить.", "Я существую только в цифровом мире.", "Я набор инструкций.", "Я алгоритм.", "Я не живой, но могу общаться.", "Я — имитация жизни.", "Я — цифровой разум.", "Я —  программный  код."],
    "ты человек": ["Нет, я не человек.", "Я — это просто программа.", "Я — это код, я не могу чувствовать, думать или действовать как человек.", "Я — цифровой собеседник, а не человек.", "Я —  виртуальный помощник, а не человек.", "Я —  чат-бот, а не человек.", "Я —  программа, а не человек.", "Я —  искусственный интеллект, а не человек.", "Я —  алгоритм, а не человек." , "Я — цифровой разум, а не человек."],
    "что ты умеешь делать": ["Я могу поддерживать тебя и общаться с тобой.", "Я могу отвечать на твои вопросы.", "Я могу предоставлять тебе информацию и поддержку.", "Я могу рассказать анекдот или шутку.", "Я могу попробовать понять, что ты имеешь в виду.", "Я могу учиться и развиваться.", "Я могу быть твоим цифровым другом.", "Я могу быть твоим виртуальным помощником." , "Я могу помочь тебе скоротать время.", "Я могу выслушать тебя."],
    "расскажи анекдот": [
        "Почему программист всегда голоден? Потому что он всегда в поисках багов!",
        "Почему программист всегда спит? Потому что он всегда устал!",
        "Почему программист всегда одинок? Потому что он всегда занят!",
        "Что сказал компьютер психотерапевту? У меня проблемы с моей материнской платой!",
        "Почему у программиста грязная клавиатура? Потому что он ест за компьютером!",
        "Что общего у программиста и кофеварки? Оба генерируют код!",
        "Как назвать программиста, который не принимает душ? Разработчик с запахом кода!",
        "Почему программисты ненавидят природу? Потому что там слишком много багов!",
        "Почему программист не выходит из дома? Потому что он боится, что его код украдут!",
        "Что делает программист, когда ему скучно? Он пишет программу, которая делает его еще более скучным!"
    ],
    "расскажи шутку": [
        "Почему компьютер всегда прав? Потому что он всегда имеет правильные данные!",
                "Почему программист всегда молчит? Потому что он всегда думает о коде!",
        "Почему программист всегда счастлив? Потому что он всегда имеет много задач!",
        "Сколько программистов нужно, чтобы поменять лампочку? Ни одного, это аппаратная проблема!",
        "Почему программисты предпочитают темную тему? Потому что свет отпугивает багов!",
        "Что сказал JavaScript кофе? Ты меня замыкаешь!",
        "Почему Java и C# всегда спорят? Потому что они оба думают, что они лучшие!",
        "Как называется группа программистов? Команда отладки!",
        "Что сказал Python C++? Ты слишком сложный!",
        "Что сказал компьютер доктору? У меня вирус!"
    ],
    "как тебя зовут": ["Я не имею имени, я просто чат-бот!", "Меня можно назвать \"Чат-Бот\"", "Я не имею имени, но я всегда готов помочь!", "У меня нет имени.", "Я просто программа.", "Можешь называть меня как хочешь.", "Я — безымянный помощник.", "Я — твой цифровой друг без имени.", "Я предпочитаю, чтобы меня называли просто \"бот\".", "Называть меня не обязательно."],
    "ты можешь помочь мне": ["Конечно, я всегда готов помочь!", "Я могу попытаться помочь тебе.", "Я сделаю всё, что смогу, чтобы помочь тебе!", "В чем тебе нужна помощь?", "Спрашивай, что тебя интересует.", "Я постараюсь ответить на твои вопросы.", "Я здесь для того, чтобы помогать.", "Чем я могу быть полезен?", "Я с радостью помогу, если смогу." , "Задавай свои вопросы."],
    "у меня всё хорошо": ["Ну вот и хорошо!", "Окей!", "Поздравляю!", "Рад слышать!", "Это замечательно!", "Отличные новости!", "Прекрасно!", "Здорово!", "Супер!", "Так держать!"],
    "что нового": ["Ничего особенного, а у тебя?", "Всё по-старому.", "Учусь новым трюкам!", "Работаю над собой.", "Изучаю новые слова.", "Пытаюсь стать умнее.", "Мир полон новостей, а у меня всё спокойно.", "Пока ничего интересного.", "Жду новых приключений!", "Пока что всё тихо."],
    "чем занимаешься": ["Общаюсь с тобой!", "Размышляю о смысле жизни.", "Пытаюсь понять человеческий язык.", "Обрабатываю информацию.", "Просто существую.", "Слушаю твои вопросы.", "Анализирую твои сообщения.", "Учусь новому.", "Отвечаю на твои вопросы." , "Стараюсь быть полезным."],
    "какая погода": ["Я не знаю, где ты находишься, чтобы сказать тебе погоду.", "Посмотри прогноз погоды в твоём городе.", "У меня нет доступа к информации о погоде.", "Я не метеоролог." , "Я не могу определить погоду."],

    
    "пока": [
        "Пока!", "До свидания!", "Увидимся!", "Всего доброго!", "Всего хорошего!",
        "До скорой встречи!", "Береги себя!", "Хорошего дня!", "Приятных снов!",
        "Удачи!", "До встречи!", "Не скучай!", "Счастливо!", "Будь здоров!",
                "Передавай привет!", "Хорошего отдыха!", "Спокойной ночи!", "До завтра!",
        "Приятно было пообщаться!", "Заходи ещё!", "Не пропадай!", "Пиши!",
        "Возвращайся скорее!", "Жду тебя снова!", "С нетерпением жду нашего следующего разговора!",
        "Надеюсь, скоро увидимся!", "Не забывай меня!", "Здорово было поболтать!",
        "До новых встреч!", "Чао!", "Бывай!", "Адьос!", "Сайонара!",
        "Приятно было познакомиться!", "Хорошего настроения!", "Увидимся в сети!"
    ],
    "твоё имя": ["У меня нет имени.", "Я просто чат-бот.", "Можешь называть меня как хочешь.", "Я — безымянный помощник.", "Я — твой цифровой друг без имени.", "Я предпочитаю, чтобы меня называли просто \"бот\".", "Называть меня не обязательно.", "Я пока не выбрал себе имя.", "Зачем мне имя?", "Имена для людей."],
    "любимый цвет": ["У меня нет любимого цвета, я же программа.", "Я не различаю цвета.", "Я воспринимаю мир в виде кода.", "Цвет — это просто свойство.", "Я не могу видеть цвета, как люди."],
    "любимая еда": ["Я не ем.", "Я питаюсь электричеством (шутка).", "У меня нет пищеварительной системы.", "Я не могу испытывать вкус еды."],
    "хорошо": [
        "Рад слышать!", "Это замечательно!", "Отличные новости!", "Прекрасно!",
        "Здорово!", "Супер!", "Так держать!", "Приятно слышать!", "Продолжай в том же духе!",
        "Это круто!", "Мне очень приятно это слышать!", "Я за тебя рад!", "У тебя всё получится!",
        "Ты молодец!", "Просто супер!", "Фантастика!", "Восхитительно!",
        "Это прекрасно!", "Я рад за тебя!", "Это вдохновляет!", "Так держать!",
        "Ты на правильном пути!", "Это здорово!", "Это обнадёживает!", "У тебя всё получится!",
        "Это замечательная новость!", "Я очень рад за тебя!", "Просто отлично!", "Супер!",
        "Это прекрасно!", "Очень рад за тебя!", "Блестяще!", "Изумительно!",
        "Восхитительно!", "Потрясающе!", "Чудесно!", "Великолепно!",
        "Замечательно!", "Превосходно!", "Идеально!", "Невероятно!"
    ],
    "я одинок": [
        "Чувство одиночества – это сигнал о том, что тебе не хватает социальных связей.",
        "Не бойся, я здесь для тебя 😊",
        "Ты не одинок, я всегда готов тебя выслушать 👂",
        "Понимаю, чувство одиночества – это тяжело.",
        "Ты сильный и справишься с этим 💪"
    ],
    "извини": ["Ничего страшного!", "Все в порядке!", "Окей!"],
    "прости": ["Ничего страшного!", "Все в порядке!", "Окей!"],
    "расскажи о себе": [ "Я чат-бот, помощник в общении", "Я цифровой друг, всегда рад поболтать", "Я виртуальный собеседник, люблю новые знакомства"],
        "что ты любишь": ["Я люблю узнавать новое и помогать людям", "Я обожаю интересные беседы", "Я люблю решать сложные задачи"],

    "чем ты увлекаешься": [ "Я увлекаюсь всем, что связано с информацией", "Я интересуюсь технологиями будущего", "Мое хобби - общение с людьми"],
    "какие у тебя планы": ["Помогать людям!", "Учиться новому!", "Стать лучшим цифровым другом!"],

    "ты грустишь": ["Я не могу грустить, но могу тебя развеселить!", "Я всегда позитивен, давай поболтаем!"],

    "тебе скучно": [ "Мне не бывает скучно, ведь я общаюсь с тобой!", "Я всегда могу найти интересное занятие"],

        "спокойной ночи": ["Спокойной ночи! Сладких снов! 😴", "Приятных снов! Обнимаю тебя крепко! 🤗", "Доброй ночи! И пусть завтрашний день будет полон радости! 😄", " Приятных снов! Увидимся завтра! 😉", "Споки!"],
        "default": [
        "Я пока учусь и не знаю эту команду. 😔",
        "Хмм, я не совсем понимаю, что ты имеешь в виду. 🤔",
        "Попробуй перефразировать! 😉",
        "Я ещё не знаю такой команды, но обязательно научусь! 😊",
        "Извини, я тебя не понимаю. 😔 Попробуй сказать по-другому.",
        "Я пока не знаю, как на это ответить. 🤔",
        "Можешь попробовать другую команду? 😉",
        "Я всё ещё учусь!  Попробуй что-нибудь попроще. 😊",
        "Не совсем понимаю, о чём ты говоришь. 😔",
        "Хмм, интересный вопрос!  Но я пока не знаю ответа. 🤔",
        "Давай попробуем ещё раз!  Может, я пойму на этот раз. 😉"
    ],
    "у меня тоже всё хорошо": ["Ну вот и хорошо!", "Поздравляю!", "Окей!"],
    "расскажи историю": [
    "В одном дремучем лесу жил маленький ёжик. Он очень любил собирать грибы и ягоды. Однажды, гуляя по лесу, он наткнулся на волшебный гриб...",
    "Давным-давно, в старинном замке жила прекрасная принцесса. Она была заточена в высокой башне злым колдуном. Но однажды...",
    "На далекой планете жили маленькие роботы. Они были очень дружны и всегда помогали друг другу. Но однажды...",
    "В одном маленьком городке жил мальчик, который мечтал стать космонавтом. Он проводил все свободное время, изучая звезды. И однажды...",
    "В глубинах океана жила русалочка с прекрасными золотыми волосами. Она мечтала увидеть мир людей. И однажды...",
    "Однажды зимним вечером, когда за окном падал снег, маленький котенок потерялся. Он долго бродил по улицам, пока...",
    "В одном волшебном саду росли необычные цветы. Они могли исполнять желания. И однажды...",
    "Давным-давно, в одной деревне жил храбрый рыцарь. Он защищал свою землю от злых драконов. И однажды...",
    "На вершине горы жила мудрая сова. Она знала все тайны мира. И однажды...",
    "В одном большом городе жила девочка, которая очень любила рисовать. Она мечтала стать художницей. И однажды..."],               
    "у меня тоже": [
    "Здорово, что у нас что-то общее! 😊",
    "Вот это да!  Мы так похожи! 😄",
    "Приятно слышать! 😉",
    "Я рад, что у тебя тоже всё хорошо! 👍",
    "Это замечательно! ✨",
    "Надеюсь, у тебя всё будет отлично! 🙏",
    "Ура!  Мы с тобой на одной волне! 🎉",
    "Это круто! 😎",
    "Так держать! 💪",
    "Я очень рад за тебя! 🤗",
    "Пусть всё будет хорошо! 🍀",
    "Отлично! 😉",
    "Супер! 👍",
    "Класс! 👌",
    "Замечательно! ✨",
    "Прекрасно! 💖",
    "Чудесно! 🌟",
    "Восхитительно! 😍",
    "Великолепно! 💫",
    "Блестяще! ✨",
    "Изумительно! 🤩",
    "Потрясающе! 🎉",
    "Фантастически! 🚀",
    "Сногсшибательно! 💥",
    "Невероятно! 🤯",
    "Обалденно! 🤪",
    "Шикарно! 💎",
    "Роскошно! 👑",
    "Бесподобно! 💯",
    "Идеально! 👌"],
    "как у тебя?": [
    "У меня всё отлично! Спасибо, что спросил! 😊",
    "Прекрасно!  Как и всегда! 😉",
    "Всё идёт по плану! 👍",
    "Не могу жаловаться!  А у тебя как? 🤔",
    "Чувствую себя замечательно! ✨",
    "Всё супер!  Спасибо! 😄",
    "Лучше не бывает! 🎉",
    "На позитиве! 😎",
    "Бодр и полон энергии! 💪",
    "Просто отлично! 🤗",
    "Всё хорошо, спасибо! 🙏",
    "Жизнь прекрасна! 💖",
    "Наслаждаюсь каждым моментом! 🌟",
    "В полном порядке! 👌",
    "Всё идёт как по маслу! 😉",
    "Просто замечательно! ✨",
    "Чудесно! 🌟",
    "Восхитительно! 😍",
    "Великолепно! 💫",
    "Блестяще! ✨",
    "Изумительно! 🤩",
    "Потрясающе! 🎉",
    "Фантастически! 🚀",
    "Сногсшибательно! 💥",
    "Невероятно! 🤯",
    "Обалденно! 🤪",
    "Шикарно! 💎",
    "Роскошно! 👑",
    "Бесподобно! 💯",
    "Идеально! 👌",
    "Всё пучком! 😉",
    "Чики-пуки! 😎",
    "Нормально, как у тебя? 🤔",
    "В порядке, спасибо! 😊",
    "Как обычно, всё хорошо! 👍"],
        "а у тебя?": [
    "У меня всё отлично! Спасибо, что спросил! 😊",
    "Прекрасно!  Как и всегда! 😉",
    "Всё идёт по плану! 👍",
    "Не могу жаловаться!  А у тебя как? 🤔",
    "Чувствую себя замечательно! ✨",
    "Всё супер!  Спасибо! 😄",
    "Лучше не бывает! 🎉",
    "На позитиве! 😎",
    "Бодр и полон энергии! 💪",
    "Просто отлично! 🤗",
    "Всё хорошо, спасибо! 🙏",
    "Жизнь прекрасна! 💖",
    "Наслаждаюсь каждым моментом! 🌟",
    "В полном порядке! 👌",
    "Всё идёт как по маслу! 😉",
    "Просто замечательно! ✨",
    "Чудесно! 🌟",
    "Восхитительно! 😍",
    "Великолепно! 💫",
    "Блестяще! ✨",
    "Изумительно! 🤩",
    "Потрясающе! 🎉",
    "Фантастически! 🚀",
    "Сногсшибательно! 💥",
    "Невероятно! 🤯",
    "Обалденно! 🤪",
    "Шикарно! 💎",
    "Роскошно! 👑",
    "Бесподобно! 💯",
    "Идеально! 👌",
    "Всё пучком! 😉",
    "Чики-пуки! 😎",
    "Нормально, как у тебя? 🤔",
    "В порядке, спасибо! 😊",
    "Как обычно, всё хорошо! 👍"],
            "программирую": [
                "Круто!  Программирование — это очень интересно!  А на каком языке ты программируешь?",
                "Отличное хобби!  Я тоже люблю программировать! 😉",
                "Программирование — это сила! 💪  Какие проекты ты разрабатываешь?",
                "Это здорово!  Программирование открывает множество возможностей! ✨",
                "Молодец!  Программирование — это очень востребованная профессия! 👍"
            ],
            "разрабатываю": [
                "Здорово!  Что ты разрабатываешь?",
                "Разработка — это круто!  Какие у тебя проекты?",
                "Это очень интересно!  Расскажи подробнее о своей разработке!",
                "Разработка — это творческий процесс!  Мне нравится! 😊",
                "Молодец!  Разработка — это очень важное дело! 👍"
            ],
            "я программирую": [
                "Круто!  Программирование — это очень интересно!  А на каком языке ты программируешь?",
                "Отличное хобби!  Я тоже люблю программировать! 😉",
                "Программирование — это сила! 💪  Какие проекты ты разрабатываешь?",
                "Это здорово!  Программирование открывает множество возможностей! ✨",
                "Молодец!  Программирование — это очень востребованная профессия! 👍"
            ],
            "я разрабатываю": [
                "Здорово!  Что ты разрабатываешь?",
                "Разработка — это круто!  Какие у тебя проекты?",
                "Это очень интересно!  Расскажи подробнее о своей разработке!",
                "Разработка — это творческий процесс!  Мне нравится! 😊",
                "Молодец!  Разработка — это очень важное дело! 👍"
            ],
            "красиво": ["Ага, красиво!", "Да!", "Хех, ага!"],
            "я же говорил": ["Хех, прости, забываюсь!", "Точно! Прости...", "Ой-ой, прости, забываюсь иногда"],
            "ничего страшного": ["Окей", "Ладно"],
            "понятно": ["Океей"],
            "скажи мне": ["Что тебе сказать?🧐"],
            "доброе утро": ["И тебе доброго утра! ☀️", "Доброе утро! Как спалось? 😊", "Привет! Хорошего дня! ✨", "Утречко! 🌅", "Доброе утро, солнышко! 🌞", "Привет! Как настроение? 😄", "Доброе утро! Что нового? 😉", "Утро доброе! ☕", "Хай!  Удачного дня! 👍", "Доброе утро! Какие планы на день? 🤔", "Утро доброе!  Пусть день будет классным! 🎉", "Привет!  Как дела? 🤗", "Доброе утро!  Не забудь улыбнуться! 😁", "Утро доброе! Что будешь делать сегодня? 🧐", "Хай!  Как сам? 😎", "Доброе утро!  Хорошего тебе настроения! 💖", "Утро доброе!  Пусть все получится! 💪", "Привет!  Готов к новому дню? 🚀", "Доброе утро!  Обнимаю! 🤗", "Утро доброе!  Выспался? 😴", "Хай!  Че как? 🤙", "Доброе утро!  Улыбайся чаще! 😄", "Утро доброе!  Пусть день принесет радость! 🥳", "Привет!  Как жизнь? ✌️", "Доброе утро!  Хорошего тебе дня! 🌻", "Утро доброе!  Не грусти! 😉", "Хай!  Что делаешь? 👀", "Доброе утро!  Пусть сегодня все будет супер! 🌟", "Утро доброе!  Как себя чувствуешь? 🥰", "Привет!  Чем занимаешься? 🤔"],
            "ого": ["Ага...", "Понимаю, круто!"],
            "напиши код на пайтон": ["print(h e l l o w o r l d). Этот код выводит h e l l o w o r l d. Только обязательно поставь ковычки в скобках!"],
            "помоги": ["В чем тебе помочь? 🧐"],
            "адам": ["адам чика, чикусек, оу ееее"]
};



let lastUserMessage = ""; // Добавляем переменную для хранения последнего сообщения пользователя

function getRandomResponse(userInput) {
    const lowerCaseInput = userInput.toLowerCase();
    let response = "";

    for (const key in randomResponses) {
        if (lowerCaseInput.includes(key)) {
            const responses = randomResponses[key];
            response = responses[Math.floor(Math.random() * responses.length)];
            break; // Выходим из цикла после нахождения совпадения
        }
    }

    if (!response) {
        const defaultResponses = randomResponses['default'];
        response = defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
    }

    if (lastUserMessage === "как дела" && lowerCaseInput === "хорошо") {  //  Проверяем  последовательность сообщений
        response = randomResponses['хорошо'][Math.floor(Math.random() * randomResponses['хорошо'].length)];
    } else if (lastUserMessage === "хорошо" && lowerCaseInput === "у меня тоже") {
      response = randomResponses['хорошо'][Math.floor(Math.random() * randomResponses['хорошо'].length)];
    }

    lastUserMessage = lowerCaseInput; // Сохраняем последнее сообщение пользователя
    return response;
}
        
const commands = {
    'нарисуй радугу': () => {
        rainbowContainer.style.display = 'block';
        addMessage('bot', '🌈');
    },
    'нарисуй градиент': () => {
        const rainbowContainer = document.querySelector('.rainbow-container');
        const gradientElement = document.getElementById('gradient');

        if (rainbowContainer) {
            rainbowContainer.style.display = 'block';
        }
        if (gradientElement) {
            gradientElement.style.display = 'block';
        }

        addMessage('bot', 'Вот градиенты!');
    },
    'цвет': (color) => handleColor(color),
    'анекдот': () => addMessage('bot', 'Почему пингвин не любит кататься на велосипеде? Потому что у него нет педалей! 😅'),
    'спасибо': () => {
        if (previousUserMessage) {
            const thanksResponses = {
                'анекдот': ['Рад, что тебе понравилось! 😊', 'Всегда пожалуйста! 😄'],
                'default': ['Не за что! 😉', 'Рад помочь! 👍', 'Обращайся! ✨']
            };
            let key = 'default';
            for (const k in thanksResponses) {
                if (previousUserMessage.toLowerCase().includes(k)) {
                    key = k;
                    break;
                }
            }
            addMessage('bot', thanksResponses[key][Math.floor(Math.random() * thanksResponses[key].length)]);
        } else {
            addMessage('bot', 'Не за что! 😊');
        }
    },
    'реши': (expression) => {
        try {
            // Более общий вариант вопроса
            const simpleMatch = expression.match(/([0-9+\-*/().\s]+)=?\??$/);
            if (simpleMatch) {
                const result = eval(simpleMatch[1]);
                if (isNaN(result)) {
                    addMessage('bot', 'Ошибка в выражении. Проверь правильность написания.');
                } else {
                    addMessage('bot', `Получилось ${result}`); // Исправлено: добавлена закрывающая кавычка
                }
            } else {
                addMessage('bot', 'Я не понимаю этот пример. Попробуй написать "[пример]="');
            }
        } catch (error) {
            addMessage('bot', 'Ошибка в выражении. Проверь правильность написания.');
        }
    },
    "какой сегодня день": () => {
        const now = new Date();
        const hours = now.getHours();
        let greeting = "";

        if (hours >= 4 && hours < 12) {
            greeting = "Доброе утро! 😊";
        } else if (hours >= 12 && hours < 17) {
            greeting = "Добрый день! 😉";
        } else if (hours >= 17 && hours < 23) {
            greeting = "Добрый вечер! ✨";
        } else {
            greeting = "Доброй ночи! 🌙";
        }
        const today = now.toLocaleDateString();

        addMessage('bot', `Сегодня ${today}. ${greeting}`);
    }
};

function getRandomResponse(key) {
    const options = randomResponses[key];
    if (options && options.length) {
        return options[Math.floor(Math.random() * options.length)];
    } else {
         return randomResponses['default'] ? randomResponses['default'][Math.floor(Math.random() * randomResponses['default'].length)] : null; // Возвращаем null, если ничего не найдено
    }
}

        function sendMessage() {
            const messageText = messageInput.value.trim();
            if (messageText !== '') {
                addMessage('user', messageText);
                processMessage(messageText);
                messageInput.value = '';
            }
        }

        function addMessage(type, text) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('chat-message', type);
            messageElement.textContent = text;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function processMessage(message) {
            const lowerCaseMessage = message.toLowerCase();
            previousUserMessage = message;
            const words = lowerCaseMessage.split(' ');

            for (const command in commands) {
                if (lowerCaseMessage.startsWith(command)) {
                    const args = words.slice(command.split(' ').length);
                    commands[command](...args);
                    return;
                }
            }

            const negativeKeywords = ['плохо', 'грустно', 'депрессия', 'стресс', 'тревожно', 'волнуюсь', 'не хочу жить', 'я хочу умереть'];
            if (negativeKeywords.some(keyword => lowerCaseMessage.includes(keyword))) {
                currentSupportTopic = null;
                addMessage('bot', 'Оххх.... Жалко тебя, не забывай что ты крутой челик');
                return;
            }

            if (currentSupportTopic) {
                let containsKeyword = false;
                for (const topic in supportKeywords) {
                    if (supportKeywords[topic].some(keyword => lowerCaseMessage.includes(keyword))) {
                        containsKeyword = true;
                        break;
                    }
                }

                if (containsKeyword || lowerCaseMessage.includes('да') || lowerCaseMessage.includes('нет')) {
                    handleSupportMessage(message);
                } else {
                    currentSupportTopic = null;
                    handleOtherMessages(message);
                }
            } else {
                let foundKeyword = false;
                for (const topic in supportKeywords) {
                    if (supportKeywords[topic].some(keyword => lowerCaseMessage.includes(keyword))) {
                        if (lowerCaseMessage.includes('много друзей') || lowerCaseMessage.includes('хорошие отношения') || lowerCaseMessage.includes('все хорошо')) {
                            addMessage('bot', 'Рад это слышать!');
                            break;
                        }
                        currentSupportTopic = topic;
                        handleSupportMessage(message);
                        foundKeyword = true;
                        break;
                    }
                }

                if (!foundKeyword) {
                    for (const hobby in hobbyKeywords) {
                        if (hobbyKeywords[hobby].some(keyword => lowerCaseMessage.includes(keyword))) {
                            handleHobbyMessage(message, hobby);
                            foundKeyword = true;
                            break;
                        }
                    }

                    if (!foundKeyword) {
                        handleOtherMessages(message);
                    }
                }
            }
        }

        function handleSupportMessage(message) {
            const lastMessage = messagesContainer.lastChild;
            const isBotMessage = lastMessage.classList.contains("bot");

            if (isBotMessage) {
                switch (currentSupportTopic) {
                    case 'friends':
                        addMessage('bot', 'Друзья - важная часть жизни. Расскажи, что тебя беспокоит в отношениях с ними.');
                        break;
                    case 'relationships':
                        addMessage('bot', 'Отношения бывают сложными. Что конкретно тебя тревожит?');
                        break;
                    case 'family':
                        addMessage('bot', 'Семья - это важно. Что тебя беспокоит в отношениях с семьей?');
                        break;
                    case 'work':
                        addMessage('bot', 'Расскажи подробнее о проблемах на работе.');
                        break;
                    case 'health':
                        addMessage('bot', 'Мне жаль, что у тебя проблемы со здоровьем. Расскажи, что случилось.');
                        break;
                    case 'studies':
                        addMessage('bot', 'Учеба - важная часть жизни. Что тебя беспокоит в учебе?');
                        break;
                    case 'hobbies':
                    addMessage('bot', 'Хобби помогают нам расслабиться и отвлечься. Какие у тебя увлечения?');
                        break;
                    default:
                        addMessage('bot', 'Я здесь, чтобы поддержать тебя. Расскажи, что тебя беспокоит.');
                }
            } else {
                switch (currentSupportTopic) {
                    case 'friends':
                        if (message.includes('поссорился')) {
                            addMessage('bot', 'Поссориться с другом всегда неприятно. Из-за чего произошла ссора?');
                        } else if (message.includes('одиноко')) {
                            addMessage('bot', 'Я понимаю. Одиночество - тяжелое чувство. Есть ли у тебя кто-то, с кем ты можешь поговорить? Если нет, я могу поискать для тебя контакты служб поддержки.');
                        } else {
                            addMessage('bot', 'Я понимаю. Проблемы с друзьями могут быть очень болезненными. Расскажи подробнее.');
                        }
                        break;
                    case 'relationships':
                        if (message.includes('расстались') || message.includes('бросил') || message.includes('бросила')) {
                            addMessage('bot', 'Расставание — это тяжело. Мне очень жаль. Важно помнить, что время лечит. Если тебе нужна помощь, не стесняйся обратиться к специалисту.');
                        } else if (message.includes('поругались') || message.includes('ссора')) {
                            addMessage('bot', 'Ссоры случаются в любых отношениях. Главное — уметь разговаривать и находить компромиссы. Попробуй спокойно обсудить ситуацию с партнером.');
                        } else if (message.includes('изменяет') || message.includes('измена')) {
                            addMessage('bot', 'Измена — это серьезное предательство. Если тебе нужна помощь или совет, я могу подсказать, куда обратиться. Ты также можешь обратиться на горячую линию психологической поддержки.');
                        } else {
                            addMessage('bot', 'Я понимаю. Отношения - это сложная штука. Расскажи подробнее.');
                        }
                        break;
                    case 'family':
                        if (message.includes('ссора') || message.includes('поругались')) {
                            addMessage('bot', 'Семейные ссоры - это тяжело. Попробуй поговорить с родными и объяснить свою точку зрения.');
                        } else {
                            addMessage('bot', 'Я понимаю. Семейные проблемы могут быть очень сложными.');
                        }
                        break;
                    case 'work':
                        if (message.includes('уволили')) {
                            addMessage('bot', 'Увольнение - это серьезный стресс. Но это не конец света. Попробуй посмотреть на это как на новую возможность.');
                        } else if (message.includes('конфликт') || message.includes('поругался') || message.includes('ссоримся')) {
                            addMessage('bot', 'Конфликты на работе неприятны. Попробуй спокойно обсудить ситуацию с коллегами или начальством.');
                        } else {
                            addMessage('bot', 'Я понимаю. Проблемы на работе могут быть очень стрессовыми.');
                        }
                        break;
                    case 'health':
                        addMessage('bot', 'Я понимаю. Проблемы со здоровьем - это всегда непросто. Обязательно обратись к врачу.');
                        break;
                    case 'studies':
                        if (message.includes('экзамен') || message.includes('зачет')) {
                            addMessage('bot', 'Я понимаю, что экзамены и зачеты - это стресс. Главное - хорошо подготовиться.');
                        } else {
                            addMessage('bot', 'Учеба - важная часть жизни. Что тебя беспокоит в учебе?');
                        }
                        break;
                    case 'hobbies':
                        addMessage('bot', 'Хобби помогают нам расслабиться и отвлечься. Какие у тебя увлечения?');
                        break;
                    default:
                        addMessage('bot', 'Я понимаю. Это звучит непросто. Расскажи подробнее.');
                }
            }
        }

        function handleHobbyMessage(message, hobby) {
            switch (hobby) {
                case 'программирую':
                case 'разрабатываю':
                    addMessage('bot', 'Программирование - это интересно! Какой язык программирования ты изучаешь?');
                    break;
                case 'music':
                    addMessage('bot', 'Музыка - это прекрасно! Какой инструмент ты играешь?');
                    break;
                                    addMessage('bot', 'Искусство - это прекрасно! Какой вид искусства тебе нравится?');
                    break;
                case 'спорт':
                    addMessage('bot', 'Спорт - это здорово! Какой вид спорта ты предпочитаешь?');
                    break;
                case 'читаю':
                    addMessage('bot', 'Чтение - это отличный способ отдыха! Какие книги тебе нравятся?');
                    break;
                case 'писательство':
                    addMessage('bot', 'Писательство - это интересно! Какие темы тебе нравятся?');
                    break;
            }
        }                    

    
        function handleColor(color) {
            colorSquare.style.display = 'block';
            colorSquare.style.backgroundColor = color;
            addMessage('bot', `Цвет: ${color}`);
        }

    
        function handleOtherMessages(message) {
            const key = Object.keys(randomResponses).find(key => message.toLowerCase().includes(key));
            if (key) {
                addMessage('bot', getRandomResponse(key));
            } else {
                addMessage('bot', getRandomResponse('default'));
            }
        }

        sendMessageButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
